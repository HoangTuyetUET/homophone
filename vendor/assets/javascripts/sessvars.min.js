sessvars=function(){var x={};return x.$={prefs:{memLimit:2e3,autoFlush:!0,crossDomain:!1,includeProtos:!1,includeFunctions:!1},parent:x,clearMem:function(){for(var a in this.parent)"$"!=a&&(this.parent[a]=void 0);this.flush()},usedMem:function(){return x={},Math.round(this.flush(x)/1024)},usedMemPercent:function(){return Math.round(this.usedMem()/this.prefs.memLimit)},flush:function(a){var b,c={},d=this.$$;a=a||top;for(var e in this.parent)c[e]=this.parent[e];return c.$=this.prefs,d.includeProtos=this.prefs.includeProtos,d.includeFunctions=this.prefs.includeFunctions,b=this.$$.make(c),a!=top?b.length:b.length/1024>this.prefs.memLimit?!1:(a.name=b,!0)},getDomain:function(){var a=location.href;for(a=a.split("///").join("//"),a=a.substring(a.indexOf("://")+3).split("/")[0];a.split(".").length>2;)a=a.substring(a.indexOf(".")+1);return a},debug:function(a){var a=a||this,b=arguments.callee;if(!document.body)return setTimeout(function(){b(a)},200),void 0;a.flush();var c=document.getElementById("sessvarsDebugDiv");c||(c=document.createElement("div"),document.body.insertBefore(c,document.body.firstChild)),c.id="sessvarsDebugDiv",c.innerHTML='<div style="line-height:20px;padding:5px;font-size:11px;font-family:Verdana,Arial,Helvetica;z-index:10000;background:#FFFFCC;border: 1px solid #333;margin-bottom:12px"><b style="font-family:Trebuchet MS;font-size:20px">sessvars.js - debug info:</b><br/><br/>Memory usage: '+a.usedMem()+" Kb ("+a.usedMemPercent()+"%)&nbsp;&nbsp;&nbsp;"+'<span style="cursor:pointer"><b>[Clear memory]</b></span><br/>'+top.name.split("\n").join("<br/>")+"</div>",c.getElementsByTagName("span")[0].onclick=function(){a.clearMem(),location.reload()}},init:function(){var a={},b=this;try{a=this.$$.toObject(top.name)}catch(c){a={}}if(this.prefs=a.$||b.prefs,this.prefs.crossDomain||this.prefs.currentDomain==this.getDomain())for(var d in a)this.parent[d]=a[d];else this.prefs.currentDomain=this.getDomain();this.parent.$=b,b.flush();var e=function(){b.prefs.autoFlush&&b.flush()};window.addEventListener?addEventListener("unload",e,!1):window.attachEvent?window.attachEvent("onunload",e):this.prefs.autoFlush=!1}},x.$.$$={compactOutput:!1,includeProtos:!1,includeFunctions:!1,detectCirculars:!0,restoreCirculars:!0,make:function(a,b){return this.restore=b,this.mem=[],this.pathMem=[],this.toJsonStringArray(a).join("")},toObject:function(x){if(!this.cleaner)try{this.cleaner=new RegExp('^("(\\\\.|[^"\\\\\\n\\r])*?"|[,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t])+?$')}catch(a){this.cleaner=/^(true|false|null|\[.*\]|\{.*\}|".*"|\d+|\d+\.\d+)$/}if(!this.cleaner.test(x))return{};if(eval("this.myObj="+x),!this.restoreCirculars||!alert)return this.myObj;if(this.includeFunctions){var x=this.myObj;for(var i in x)"string"!=typeof x[i]||x[i].indexOf("JSONincludedFunc:")||(x[i]=x[i].substring(17),eval("x[i]="+x[i]))}this.restoreCode=[],this.make(this.myObj,!0);var r=this.restoreCode.join(";")+";";return eval('r=r.replace(/\\W([0-9]{1,})(\\W)/g,"[$1]$2").replace(/\\.\\;/g,";")'),eval(r),this.myObj},toJsonStringArray:function(a,b){b||(this.path=[]),b=b||[];var c;switch(typeof a){case"object":if(this.lastObj=a,this.detectCirculars){for(var d=this.mem,e=this.pathMem,f=0;f<d.length;f++)if(a===d[f])return b.push('"JSONcircRef:'+e[f]+'"'),b;d.push(a),e.push(this.path.join("."))}if(a){if(a.constructor==Array){b.push("[");for(var f=0;f<a.length;++f)this.path.push(f),f>0&&b.push(",\n"),this.toJsonStringArray(a[f],b),this.path.pop();return b.push("]"),b}if("undefined"!=typeof a.toString){b.push("{");var g=!0;for(var f in a)if(this.includeProtos||a[f]!==a.constructor.prototype[f]){this.path.push(f);var h=b.length;g||b.push(this.compactOutput?",":",\n"),this.toJsonStringArray(f,b),b.push(":"),this.toJsonStringArray(a[f],b),b[b.length-1]==c?b.splice(h,b.length-h):g=!1,this.path.pop()}return b.push("}"),b}return b}return b.push("null"),b;case"unknown":case"undefined":case"function":if(!this.includeFunctions)return b.push(c),b;a="JSONincludedFunc:"+a,b.push('"');var i=["\n","\\n","\r","\\r",'"','\\"'];a+="";for(var f=0;6>f;f+=2)a=a.split(i[f]).join(i[f+1]);return b.push(a),b.push('"'),b;case"string":this.restore&&0==a.indexOf("JSONcircRef:")&&this.restoreCode.push("this.myObj."+this.path.join(".")+"="+a.split("JSONcircRef:").join("this.myObj.")),b.push('"');var i=["\n","\\n","\r","\\r",'"','\\"'];a+="";for(var f=0;6>f;f+=2)a=a.split(i[f]).join(i[f+1]);return b.push(a),b.push('"'),b;default:return b.push(String(a)),b}}},x.$.init(),x}();
