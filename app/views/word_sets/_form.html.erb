<%= form_for(@word_set) do |f| %>
  <% if @word_set.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@word_set.errors.count, "error") %> prohibited this word_set from being saved:</h2>

      <ul>
      <% @word_set.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <% make_one_input = Proc.new do |word=nil| %>
    <div data-infinite-inputs-row class="form-group">
      <input type="text" name="word_set[words][]" value="<%= word.text if word %>"/>
    </div>
  <% end %>

  <div class="row">
    <div class="col-sm-6" data-infinite-inputs>
      <% if @word_set.words.count.zero? %>
        <% make_one_input.call() %>
      <% else %>
        <% @word_set.words.find_each &make_one_input %>
      <% end %>
    </div>
  </div>

  <div class="actions">
    <%= f.submit class: "btn btn-primary" %>
  </div>
<% end %>
